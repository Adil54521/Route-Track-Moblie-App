# üì¶ RouteTrack

**RouteTrack** is an Android application for scanning and processing delivery invoices with the ability to send data to a server in XML format. The app allows you to:

- Authenticate using a branch key
- Scan invoice QR codes
- Store and filter results by date and invoice number
- Add discounts and delivery amounts
- Upload results to an HTTP server
- Simulate scans when running on an emulator

## üöÄ Features

- üì∑ QR code scanning via ML Kit / ZXing
- üíæ Local storage of invoices in JSON format
- üìÖ Filtering invoices by date
- üîç Search by invoice number
- üßæ XML file generation from scanned results
- ‚òÅÔ∏è HTTP POST upload of XML file
- üé® User-friendly UI with highlighting and spinners
- üì± Emulator support (QR code simulation)
- üß† Error handling and user feedback
- üîê Auth data persistence via SharedPreferences

## üìÇ Project Structure

```
com.example.routetrack/
‚îú‚îÄ‚îÄ MainActivity.kt              # Branch key login screen
‚îú‚îÄ‚îÄ WorkActivity.kt              # Main scanning and upload screen
‚îú‚îÄ‚îÄ ScanResultsAdapter.kt        # RecyclerView adapter for invoices
‚îú‚îÄ‚îÄ RetrofitClient.kt            # Retrofit class for API auth
‚îú‚îÄ‚îÄ activity_login.xml           # Login layout
‚îú‚îÄ‚îÄ activity_work.xml            # Work screen layout
‚îú‚îÄ‚îÄ item_scan_result.xml         # Invoice item layout
‚îú‚îÄ‚îÄ DatePickerFragment.kt        # Optional: date picker dialog
```

## üõ†Ô∏è Requirements

- Android Studio Hedgehog or newer
- minSdkVersion: 24
- compileSdkVersion: 33+
- Dependencies:
  - Retrofit2
  - OkHttp
  - ML Kit Barcode Scanning
  - ZXing (JourneyApps)
  - Gson
  - Kotlin Coroutines
  - AndroidX libraries

## üß™ Sample QR Code Format

```
N-123456&amount=1500
```

- `123456` ‚Äî Invoice number
- `1500` ‚Äî Invoice amount

## üîê Authentication

The app starts with a branch key login. After successful authentication, FTP connection data (host, login, password) is passed to `UnifiedLoginActivity` and can be used for syncing or uploads.

## üåê Uploading Data to Server

Scanned results are sent as XML via HTTP POST:

```
POST http://<your-server>/upload_scan_results
Content-Type: application/xml
Authorization: Basic <base64(login:password)>
```

## üß™ Emulator Support

The emulator-friendly mode lets you simulate scans using a static QR code:

- Loads `qr.png` from resources on emulators
- Parses it as a real QR code

## üíæ Data Storage

Scanned data is saved to:

```
scan_results_<hash(profile)>.json
```

and reloaded automatically on app startup.

## üì∏ Screenshots

_(Add images of login screen, invoice list, scanning and upload screens)_

## üìå Notes

- Adapter supports editing, payment selection, and invoice deletion
- Filtering and search features included
- Delivered invoices are visually highlighted
- SharedPreferences store user settings and profiles

## üßë‚Äçüíª Author

- Author: Adilkhan Shukraliyev
- Email: adilkhan.shukraliyev@gmail.com

==============================================================================================================================================================
# üì¶ RouteTrack

**RouteTrack** ‚Äî —ç—Ç–æ Android-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–æ–≤–∞—Ä–Ω—ã—Ö –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä –≤ —Ñ–æ—Ä–º–∞—Ç–µ XML. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç:

- –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è –ø–æ –∫–ª—é—á—É —Ñ–∏–ª–∏–∞–ª–∞
- –°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å QR-–∫–æ–¥—ã –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö
- –•—Ä–∞–Ω–∏—Ç—å –∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ –¥–∞—Ç–µ –∏ –Ω–æ–º–µ—Ä—É
- –î–æ–±–∞–≤–ª—è—Ç—å —Å–∫–∏–¥–∫–∏ –∏ —Å—É–º–º—ã –¥–æ—Å—Ç–∞–≤–∫–∏
- –ó–∞–≥—Ä—É–∂–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–∞ HTTP-—Å–µ—Ä–≤–µ—Ä
- –†–∞–±–æ—Ç–∞—Ç—å –≤ —ç–º—É–ª—è—Ç–æ—Ä–µ —Å –∑–∞–≥–ª—É—à–∫–∞–º–∏

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üì∑ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è QR-–∫–æ–¥–æ–≤ —Å –ø–æ–º–æ—â—å—é ML Kit / ZXing
- üíæ –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö –≤ JSON-—Ñ–∞–π–ª–µ
- üìÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö –ø–æ –¥–∞—Ç–µ
- üîç –ü–æ–∏—Å–∫ –ø–æ –Ω–æ–º–µ—Ä—É –Ω–∞–∫–ª–∞–¥–Ω–æ–π
- üßæ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è XML-—Ñ–∞–π–ª–∞ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
- ‚òÅÔ∏è –û—Ç–ø—Ä–∞–≤–∫–∞ XML –Ω–∞ —Å–µ—Ä–≤–µ—Ä –ø–æ HTTP POST
- üé® –£–¥–æ–±–Ω—ã–π UI —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π –∏ —Å–ø–∏–Ω–Ω–µ—Ä–∞–º–∏
- üì± –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —ç–º—É–ª—è—Ç–æ—Ä–æ–≤ (—ç–º—É–ª—è—Ü–∏—è QR-—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è)
- üß† –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- üîê –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ SharedPreferences

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
com.example.routetrack/
‚îú‚îÄ‚îÄ MainActivity.kt              # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ –∫–ª—é—á—É —Ñ–∏–ª–∏–∞–ª–∞
‚îú‚îÄ‚îÄ WorkActivity.kt              # –û—Å–Ω–æ–≤–Ω–æ–π —ç–∫—Ä–∞–Ω —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∑–∞–≥—Ä—É–∑–∫–∏
‚îú‚îÄ‚îÄ ScanResultsAdapter.kt        # –ê–¥–∞–ø—Ç–µ—Ä –¥–ª—è —Å–ø–∏—Å–∫–∞ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö (RecyclerView)
‚îú‚îÄ‚îÄ RetrofitClient.kt            # –ö–ª–∞—Å—Å Retrofit –¥–ª—è API –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ activity_login.xml           # –ú–∞–∫–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ activity_work.xml            # –ú–∞–∫–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞
‚îú‚îÄ‚îÄ item_scan_result.xml         # –ú–∞–∫–µ—Ç –æ–¥–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –Ω–∞–∫–ª–∞–¥–Ω–æ–π
‚îú‚îÄ‚îÄ DatePickerFragment.kt        # –í—ã–±–æ—Ä –¥–∞—Ç—ã (–µ—Å–ª–∏ –µ—Å—Ç—å)
```

## üõ†Ô∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Android Studio Hedgehog –∏–ª–∏ –≤—ã—à–µ
- minSdkVersion: 24
- compileSdkVersion: 33+
- –ü–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:
  - Retrofit2
  - OkHttp
  - ML Kit Barcode Scanning
  - ZXing (JourneyApps)
  - Gson
  - Coroutines
  - AndroidX RecyclerView, AppCompat –∏ —Ç.–¥.

## üß™ –ü—Ä–∏–º–µ—Ä QR-–∫–æ–¥–∞

–§–æ—Ä–º–∞—Ç –æ–∂–∏–¥–∞–µ–º–æ–≥–æ QR-–∫–æ–¥–∞:

```
N-123456&amount=1500
```

- `123456` ‚Äî –Ω–æ–º–µ—Ä –Ω–∞–∫–ª–∞–¥–Ω–æ–π
- `1500` ‚Äî —Å—É–º–º–∞

## üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞—á–∏–Ω–∞–µ—Ç —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ `branch_key`. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã–µ FTP —Å–µ—Ä–≤–µ—Ä–∞ (host, login, password) –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –Ω–∞ –≤—Ç–æ—Ä–æ–π —ç–∫—Ä–∞–Ω (`UnifiedLoginActivity`), –≥–¥–µ –º–æ–≥—É—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –ø—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö.

## üåê –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –Ω–∞ API:

```
POST http://<–≤–∞—à-—Å–µ—Ä–≤–µ—Ä>/upload_scan_results
Content-Type: application/xml
Authorization: Basic <base64(login:password)>
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —ç–º—É–ª—è—Ç–æ—Ä–µ

–î–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –æ—Ç–ª–∞–¥–∫–∏ –Ω–∞ —ç–º—É–ª—è—Ç–æ—Ä–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–≥–ª—É—à–∫–∞:

- –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤ —ç–º—É–ª—è—Ç–æ—Ä–µ, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `qr.png` –∏–∑ —Ä–µ—Å—É—Ä—Å–æ–≤
- –û–Ω —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç—Å—è –∫–∞–∫ –≤–∞–ª–∏–¥–Ω—ã–π QR-–∫–æ–¥

## üíæ –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª:

```
scan_results_<hash(profile)>.json
```

–ò –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –∑–∞–ø—É—Å–∫–µ.

## üì∏ –°–∫—Ä–∏–Ω—à–æ—Ç—ã

_(–î–æ–±–∞–≤—å—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —ç–∫—Ä–∞–Ω–∞ –ª–æ–≥–∏–Ω–∞, —Å–ø–∏—Å–∫–∞ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö, —Ñ–æ—Ä–º—ã —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö)_

## üìå –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –ö–æ–¥ –∞–¥–∞–ø—Ç–µ—Ä–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –≤—ã–±–æ—Ä —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã –∏ —É–¥–∞–ª–µ–Ω–∏–µ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–µ –∏ –ø–æ–∏—Å–∫
- –°—Ç–∞—Ç—É—Å—ã –¥–æ—Å—Ç–∞–≤–∫–∏ –≤—ã–¥–µ–ª—è—é—Ç—Å—è —Ü–≤–µ—Ç–æ–º
- SharedPreferences –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏

## üßë‚Äçüíª –ê–≤—Ç–æ—Ä

- –ê–≤—Ç–æ—Ä: –ê–¥–∏–ª—å—Ö–∞–Ω –®—É–∫—Ä–∞–ª–∏–µ–≤
- Email: adilkhan.shukraliyev@gmail.com


